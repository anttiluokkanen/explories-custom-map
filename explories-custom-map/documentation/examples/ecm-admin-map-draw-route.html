<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
<title>Explories Custom Map - Admin map draw route</title>

<script src="../../vendor/jquery-3.3.1.min.js"></script>
<script src="../vendor/prism-1.15.0/prism.js"></script>

<script>

$(document).ready(function() {

    $("#getRouteBtn").click(function() {
        var waypoints = ECMAdminMap.getRouteWaypoints();
        if (waypoints) {
            $("#waypoints").html(JSON.stringify(waypoints,null, 2));
        }
        else
        {
            alert('Draw a route on the map first');
        }
    });

});

</script>

<link rel="stylesheet" href="../vendor/prism-1.15.0/prism-one-dark.css" />
<link rel="stylesheet" href="../css/ecm-documentation.css?v=20190313" />
<link rel="stylesheet" href="../../css/ecm.css?v=20190313" />
<link rel="stylesheet" href="../../css/ecm-admin.css?v=20190313" />

</head>

<body class="no-nav">

<header>
    <img src="../images/explories-landscape-white.svg" alt="Explories" />
</header>

<main class="container">

    <h1>Explories Custom Map</h1>

    <h2>Admin map draw route example</h2>

    <p>This example shows how to draw a route on the map and retrieve it in the admin section. The route is drawn on the map using Google Maps Drawing Library. After the route is drawn it can be retrieved with ECMAdminMap.getRouteWaypoints().</p>

    <div id="ecm-map" class="ecm-admin-map"></div>

    <p class="text-center">
        <button type="button" id="getRouteBtn" class="btn">Get route</button>
    </p>

    <pre><code id="waypoints" class="language-js">Draw route on map and click Get route button.</code></pre>

    <p>Since the default mode is <em>marker</em> the route drawing mode has to be set via config:

<pre><code id="waypoints" class="language-js">ECMAdminMap.setConfig({
    mode: 'route'
});</code></pre>

    <p>Existing route can be shown on the map via config also:</p>

<pre><code class="language-js">ECMAdminMap.setConfig({
    mode: 'route',
    route: {
        "polylineOptions": {
            "strokeColor": "#0099ff",
            "strokeOpacity": 1,
            "strokeWeight": 5
        },
        "waypoints": [
            {
                "lat": 64.0978254291715,
                "lng": 26.8411439521484
            },
            {
                "lat": 63.994450633337145,
                "lng": 26.53627334667965
            },
            {
                "lat": 63.98722413093548,
                "lng": 27.18995987011715
            },
            {
                "lat": 64.0978254291715,
                "lng": 26.8411439521484
            }
        ]
    }
});</code></pre>

    <p>Config options can be set via setConfig method. Here are shown the default values:</p>

<pre><code id="waypoints" class="language-js">ECMAdminMap.setConfig({
initLocation: {lat: 64.144319, lng: 26.872043},
mapElId: 'ecm-map',
mapTypeId: 'roadmap',
mapInitZoom: 10,
mode: 'marker',
route: null
});</code></pre>

</main>

<script src="../../js/ECMAdminMap.js?v=20190304-2"></script>
<script>
ECMAdminMap.setConfig({
    mode: 'route',
    route: {
        "polylineOptions": {
            "strokeColor": "#0099ff",
            "strokeOpacity": 1,
            "strokeWeight": 5
        },
        "waypoints": [
          {
            "lat": 64.21528608206265,
            "lng": 26.978889864544158
          },
          {
            "lat": 64.19795695674823,
            "lng": 27.028328341106658
          },
          {
            "lat": 64.21528608206265,
            "lng": 27.054420870403533
          },
          {
            "lat": 64.19855469334439,
            "lng": 27.076393526653533
          },
          {
            "lat": 64.20632409541702,
            "lng": 27.098366182903533
          },
          {
            "lat": 64.20214084206228,
            "lng": 27.116218966106658
          },
          {
            "lat": 64.20512894465418,
            "lng": 27.143684786419158
          },
          {
            "lat": 64.21528608206265,
            "lng": 27.162910860637908
          },
          {
            "lat": 64.18958728994961,
            "lng": 27.168404024700408
          },
          {
            "lat": 64.18599951583076,
            "lng": 27.134071749309783
          },
          {
            "lat": 64.16566002050742,
            "lng": 27.131325167278533
          },
          {
            "lat": 64.17942072349304,
            "lng": 27.076393526653533
          },
          {
            "lat": 64.18719549214632,
            "lng": 26.989876192669158
          },
          {
            "lat": 64.2003478257433,
            "lng": 26.976143282512908
          },
          {
            "lat": 64.21528608206265,
            "lng": 26.978889864544158
          }
        ]
    }
});
</script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA3fO1wMEiJt5KflJ0qlpjYNgcdbJIF63o&libraries=drawing&callback=ECMAdminMap.init"></script>

</body>
</html>
